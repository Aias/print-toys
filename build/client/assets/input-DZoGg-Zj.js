import{r,z as G,j as F}from"./chunk-JMJ3UQ3L-BilMNg9t.js";import{c as J}from"./utils-CDN07tui.js";import{N as c,f as K,E as R,u as I,i as q,a as L,b as A}from"./button-BzO9OnCD.js";import{r as H}from"./index-DkYg50eK.js";let D=(function(e){return e.disabled="data-disabled",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e})({});const Q={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:null,valueMissing:!1},W={valid(e){return e===null?null:e?{[D.valid]:""}:{[D.invalid]:""}}},X=r.createContext({invalid:void 0,name:void 0,validityData:{state:Q,errors:[],error:"",value:"",initialValue:null},setValidityData:c,disabled:void 0,touched:!1,setTouched:c,dirty:!1,setDirty:c,filled:!1,setFilled:c,focused:!1,setFocused:c,validate:()=>null,validationMode:"onSubmit",validationDebounceTime:0,shouldValidateOnChange:()=>!1,state:{disabled:!1,valid:null,touched:!1,dirty:!1,filled:!1,focused:!1},markedDirtyRef:{current:!1},validation:{getValidationProps:(e=R)=>e,getInputValidationProps:(e=R)=>e,inputRef:{current:null},commit:async()=>{}}});function h(e=!0){const t=r.useContext(X);if(t.setValidityData===c&&!e)throw new Error(K(28));return t}const Z=r.createContext({formRef:{current:{fields:new Map}},errors:{},clearErrors:c,validationMode:"onSubmit",submitAttemptedRef:{current:!1}});function ee(){return r.useContext(Z)}const te={...G};let S=0;function ae(e,t="mui"){const[a,s]=r.useState(e),i=e||a;return r.useEffect(()=>{a==null&&(S+=1,s(`${t}-${S}`))},[a,t]),i}const k=te.useId;function ne(e,t){if(k!==void 0){const a=k();return e??`${t}-${a}`}return ae(e,t)}function le(e){return ne(e,"base-ui")}const ie=r.createContext({controlId:void 0,setControlId:c,labelId:void 0,setLabelId:c,messageIds:[],setMessageIds:c,getDescriptionProps:e=>e});function N(){return r.useContext(ie)}function se(e,t){return{...e,state:{...e.state,valid:!t&&e.state.valid}}}function oe({controlled:e,default:t,name:a,state:s="value"}){const{current:i}=r.useRef(e!==void 0),[l,u]=r.useState(t),n=i?e:l,v=r.useCallback(b=>{i||u(b)},[]);return[n,v]}function re(e={}){const{id:t,implicit:a=!1,controlRef:s}=e,{controlId:i,setControlId:l}=N(),u=le(t);return I(()=>{if(!(!a&&!t||l===c)){if(a){const n=s?.current;q(n)&&n.closest("label")!=null?l(t??null):l(i??u)}else t&&l(t);return()=>{t&&l(void 0)}}},[t,s,i,l,a,u]),i??u}function ue(e){const{enabled:t=!0,value:a,id:s,name:i,controlRef:l,commit:u}=e,{formRef:n}=ee(),{invalid:v,markedDirtyRef:b,validityData:p,setValidityData:x}=h(),m=L(e.getValue);I(()=>{if(!t)return;let d=a;d===void 0&&(d=m()),p.initialValue===null&&d!==null&&x(y=>({...y,initialValue:d}))},[t,x,a,p.initialValue,m]),I(()=>{!t||!s||n.current.fields.set(s,{getValue:m,name:i,controlRef:l,validityData:se(p,v),validate(){let d=a;d===void 0&&(d=m()),b.current=!0,H.flushSync(()=>u(d))}})},[u,l,t,n,m,s,v,b,i,p,a]),I(()=>{const d=n.current.fields;return()=>{s&&d.delete(s)}},[n,s])}const de="none";function ce(e,t,a,s){let i=!1,l=!1;const u=R;return{reason:e,event:t??new Event("base-ui"),cancel(){i=!0},allowPropagation(){l=!0},get isCanceled(){return i},get isPropagationAllowed(){return l},trigger:a,...u}}const fe=r.forwardRef(function(t,a){const{render:s,className:i,id:l,name:u,value:n,disabled:v=!1,onValueChange:b,defaultValue:p,...x}=t,{state:m,name:d,disabled:y}=h(),C=y||v,E=d??u,U=r.useMemo(()=>({...m,disabled:C}),[m,C]),{setTouched:w,setDirty:$,validityData:j,setFocused:P,setFilled:V,validationMode:B,validation:f}=h(),{labelId:O}=N(),M=re({id:l});I(()=>{const o=n!=null;f.inputRef.current?.value||o&&n!==""?V(!0):o&&n===""&&V(!1)},[f.inputRef,V,n]);const[T,_]=oe({controlled:n,default:p,name:"FieldControl",state:"value"}),Y=n!==void 0,z=L((o,g)=>{b?.(o,g),!g.isCanceled&&_(o)});return ue({id:M,name:E,commit:f.commit,value:T,getValue:()=>f.inputRef.current?.value,controlRef:f.inputRef}),A("input",t,{ref:a,state:U,props:[{id:M,disabled:C,name:E,ref:f.inputRef,"aria-labelledby":O,...Y?{value:T}:{defaultValue:p},onChange(o){const g=o.currentTarget.value;z(g,ce(de,o.nativeEvent)),$(g!==j.initialValue),V(g!=="")},onFocus(){P(!0)},onBlur(o){w(!0),P(!1),B==="onBlur"&&f.commit(o.currentTarget.value)},onKeyDown(o){o.currentTarget.tagName==="INPUT"&&o.key==="Enter"&&(w(!0),f.commit(o.currentTarget.value))}},f.getInputValidationProps(),x],stateAttributesMapping:W})}),me=r.forwardRef(function(t,a){return F.jsx(fe,{ref:a,...t})});function xe({className:e,type:t,...a}){return F.jsx(me,{type:t,"data-slot":"input",className:J("dark:bg-input/30 border-input focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:aria-invalid:border-destructive/50 disabled:bg-input/50 dark:disabled:bg-input/80 file:text-foreground placeholder:text-muted-foreground h-8 w-full min-w-0 rounded-none border bg-transparent px-2.5 py-1 text-xs transition-colors outline-none file:inline-flex file:h-6 file:border-0 file:bg-transparent file:text-xs file:font-medium focus-visible:ring-1 disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:ring-1 md:text-xs",e),...a})}export{xe as I};
