import{w as f,r,u as x,j as n,F as y}from"./chunk-JMJ3UQ3L-BilMNg9t.js";import{B as m}from"./button-BzO9OnCD.js";import{I as j}from"./input-DZoGg-Zj.js";import"./utils-CDN07tui.js";import"./index-DkYg50eK.js";const S=f(function({actionData:s}){const[d,c]=r.useState(""),[p,o]=r.useState([[]]),i=x(),a=r.useRef(null),h=e=>{e.preventDefault(),i(e.currentTarget,{method:"post"}),c("")},l=r.useCallback(()=>{i({action:"cut"},{method:"post"})},[i]);return r.useEffect(()=>{const e=t=>{(t.metaKey||t.ctrlKey)&&t.key==="Enter"&&(t.preventDefault(),l())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[l]),r.useEffect(()=>{!s?.success||s===a.current||(a.current=s,"line"in s?o(e=>{const t=[...e],u=t[t.length-1];return u.includes(s.line)||(t[t.length-1]=[...u,s.line]),t}):"cut"in s&&o(e=>e[e.length-1].length>0?[...e,[]]:e))},[s]),n.jsxs("div",{className:"p-4",children:[n.jsx("h1",{className:"mb-4 text-2xl font-bold",children:"Typewriter"}),n.jsx(y,{onSubmit:h,className:"space-y-4",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(j,{type:"text",name:"line",value:d,onChange:e=>c(e.target.value),placeholder:"Type a line and press Enter",className:"grow"}),n.jsx("input",{type:"hidden",name:"action",value:"print"}),n.jsx(m,{type:"submit",className:"whitespace-nowrap",children:"Print Line"})]})}),n.jsx(m,{onClick:l,className:"mt-4 w-full",children:"Cut Page (Cmd+Enter)"}),p.map((e,t)=>n.jsxs("div",{className:"mt-8",children:[t>0&&n.jsx("hr",{className:"my-4 border-gray-300"}),e.length>0&&n.jsx("div",{children:n.jsx("pre",{className:"font-mono whitespace-pre-wrap",children:e.join(`
`)})})]},t))]})});export{S as default};
